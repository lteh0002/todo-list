(()=>{"use strict";function e(e,t,n){this.task=e,this.dueDate=t,this.priority=n}const t=document.querySelector("#add-task-form"),n=document.querySelector("#add-task-button"),d=document.querySelector("#add-task-input"),l=document.querySelector("#add-task-date"),a=document.querySelector("#priority"),c=document.querySelector(".list");let o,i="",s=[];function r(){c.replaceChildren();for(let e=0;e<s.length;e++){const t=document.createElement("div");t.classList.add("task");const n=document.createElement("div");n.classList.add("task_el"),t.appendChild(n);const d=document.createElement("input");d.classList.add("text"),d.type="text",d.value=s[e].task,d.readOnly=!0,n.appendChild(d);const l=document.createElement("input");l.classList.add("taskDate"),l.type="date",l.value=s[e].dueDate,l.readOnly=!0,n.appendChild(l);const a=document.createElement("select");a.classList.add("selection");const o=document.createElement("option"),i=document.createElement("option");i.classList.add("prio");const r=document.createElement("option");r.classList.add("prio");const y=document.createElement("option");y.classList.add("prio"),i.value="High",i.text="High",r.value="Medium",r.text="Medium",y.value="Low",y.text="Low",o.text=s[e].priority,"High"===o.text?i.selected:"Medium"===o.text?r.selected:"Medium"===o.text&&y.selected,a.add(i,null),a.add(r,null),a.add(y,null),a.classList.add("taskPriority"),a.value=s[e].priority,a.disabled=!0,n.appendChild(a);const v=document.createElement("div");v.classList.add("taskaction");const L=document.createElement("button");L.innerText="Edit",L.classList.add("editBtn");const h=document.createElement("button");h.innerText="Delete",h.classList.add("deleteBtn"),v.appendChild(L),v.appendChild(h),n.appendChild(v),c.appendChild(n),u(L,d,l,a,o),p(),m(h)}}function u(e,t,n,d,l){e.addEventListener("click",(a=>{"edit"===e.innerText.toLowerCase()?(e.innerText="Save",t.readOnly=!1,n.readOnly=!1,d.disabled=!1,l.text="",t.focus()):"save"===e.innerText.toLowerCase()&&(e.innerText="Edit",t.readOnly=!0,n.readOnly=!0,d.disabled=!0,console.log(s))}))}function m(e){let t=document.querySelectorAll(".deleteBtn");t.forEach((e=>{e.addEventListener("click",(e=>(o=Array.from(t).indexOf(e.target),o)))})),e.addEventListener("click",(function(){s.splice(o,1),c.removeChild(this.parentNode.parentNode)}))}function p(){let e=document.querySelectorAll(".editBtn");e.forEach((t=>{t.addEventListener("click",(t=>{let n=Array.from(e).indexOf(t.target);!function(e){let t=document.querySelectorAll(".text");s[e].task=t[e].value}(n),function(e){let t=document.querySelectorAll(".taskDate");s[e].dueDate=t[e].value}(n),function(e){let t=document.querySelectorAll(".selection");s[e].priority=t[e].value}(n)}))}))}let y=s;const v=document.querySelector(".inbox"),L=document.querySelector(".today"),h=document.querySelector(".list"),E=document.querySelector(".inbox"),k=document.querySelector(".today"),x=document.querySelector(".list");n.addEventListener("click",(n=>{if(n.preventDefault(),""===d.value)alert("Please insert your task!");else{i=d.value;let n=l.value,c=a.value;const o=new e(i,n,c);s.push(o),t.reset(),r()}})),L.addEventListener("click",(()=>{v.classList.remove("active"),L.classList.add("active"),h.replaceChildren(),console.log(y)})),E.addEventListener("click",(()=>{E.classList.add("active"),k.classList.remove("active"),x.replaceChildren(),r()}))})();