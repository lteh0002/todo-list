(()=>{"use strict";function e(e,t,n){this.task=e,this.dueDate=t,this.priority=n}const t=document.querySelector("#add-task-form"),n=document.querySelector("#add-task-button"),d=document.querySelector("#add-task-input"),a=document.querySelector("#add-task-date"),l=document.querySelector("#priority"),c=document.querySelector(".list");let i,o="",s=[];n.addEventListener("click",(n=>{n.preventDefault(),o=d.value;let r=a.value,u=l.value;const m=new e(o,r,u);s.push(m),t.reset(),function(){const e=document.createElement("div");e.classList.add("task");const t=document.createElement("div");t.classList.add("task_el"),e.appendChild(t);const n=document.createElement("input");n.classList.add("text"),n.type="text",n.value=s[s.length-1].task,n.readOnly=!0,t.appendChild(n);const d=document.createElement("input");d.classList.add("taskDate"),d.type="date",d.value=s[s.length-1].dueDate,d.readOnly=!0,t.appendChild(d);const a=document.createElement("select");a.classList.add("selection");const l=document.createElement("option"),o=document.createElement("option");o.classList.add("prio");const r=document.createElement("option");r.classList.add("prio");const u=document.createElement("option");u.classList.add("prio"),o.value="High",o.text="High",r.value="Medium",r.text="Medium",u.value="Low",u.text="Low",l.text=s[s.length-1].priority,"High"===l.text?o.selected:"Medium"===l.text?r.selected:"Medium"===l.text&&u.selected,a.add(o,null),a.add(r,null),a.add(u,null),a.classList.add("taskPriority"),a.value=s[s.length-1].priority,a.disabled=!0,t.appendChild(a);const m=document.createElement("div");m.classList.add("taskaction");const p=document.createElement("button");p.innerText="Edit",p.classList.add("editBtn");const y=document.createElement("button");y.innerText="Delete",y.classList.add("deleteBtn"),m.appendChild(p),m.appendChild(y),t.appendChild(m),c.appendChild(t),function(e,t,n,d,a){e.addEventListener("click",(l=>{"edit"===e.innerText.toLowerCase()?(e.innerText="Save",t.readOnly=!1,n.readOnly=!1,d.disabled=!1,a.text="",t.focus()):"save"===e.innerText.toLowerCase()&&(e.innerText="Edit",t.readOnly=!0,n.readOnly=!0,d.disabled=!0,console.log(s))}))}(p,n,d,a,l),function(){let e=document.querySelectorAll(".editBtn");e.forEach((t=>{t.addEventListener("click",(t=>{let n=Array.from(e).indexOf(t.target);!function(e){let t=document.querySelectorAll(".text");s[e].task=t[e].value}(n),function(e){let t=document.querySelectorAll(".taskDate");s[e].dueDate=t[e].value}(n),function(e){let t=document.querySelector(".selection");s[e].priority=t.value}(n)}))}))}(),function(e){let t=document.querySelectorAll(".deleteBtn");t.forEach((e=>{e.addEventListener("click",(e=>(i=Array.from(t).indexOf(e.target),i)))})),e.addEventListener("click",(function(){s.splice(i,1),c.removeChild(this.parentNode.parentNode)}))}(y)}()}))})();